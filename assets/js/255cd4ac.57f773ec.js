"use strict";(self.webpackChunkerlendthune_com=self.webpackChunkerlendthune_com||[]).push([[1572],{709:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"treasurehunter/treasure-hunt","title":"Treasure Hunt","description":"Open the standalone QR scanner page do perform the treasure hunt.","source":"@site/docs/treasurehunter/treasure-hunt.mdx","sourceDirName":"treasurehunter","slug":"/treasurehunter/treasure-hunt","permalink":"/docs/treasurehunter/treasure-hunt","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Treasure Hunt","hide_title":true},"sidebar":"productsSidebar","previous":{"title":"Create Treasure Hunt","permalink":"/docs/treasurehunter/create-treasure-hunt"},"next":{"title":"Garmin wizard","permalink":"/docs/category/garmin-wizard"}}');var s=r(4848),a=r(8453),i=r(1557);const o={sidebar_position:3,title:"Treasure Hunt",hide_title:!0},c=void 0,u={},d=[];function l(e){const t={a:"a",p:"p",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["Open the ",(0,s.jsx)(t.a,{href:"/qr-scanner",children:"standalone QR scanner page"})," do perform the treasure hunt."]}),"\n",(0,s.jsx)(t.p,{children:"You can also test it below:"}),"\n",(0,s.jsx)(i.A,{showScannedCode:!0})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1557:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6540),s=r(6624),a=r.n(s),i=r(4848);const o=e=>{let{showScannedCode:t=!1}=e;const r=(0,n.useRef)(null),s=(0,n.useRef)(null),[o,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(null),[l,h]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{var e;await(e="/sql/sql-wasm.js",new Promise(((t,r)=>{if(window.initSqlJs)return void t();const n=document.createElement("script");n.src=e,n.async=!0,n.onload=t,n.onerror=r,document.body.appendChild(n)})));const t=await window.initSqlJs({locateFile:()=>"/sql/sql-wasm.wasm"}),r=localStorage.getItem("sqlite-db");let n;if(r){const e=new Uint8Array(atob(r).split("").map((e=>e.charCodeAt(0))));n=new t.Database(e)}else n=new t.Database,n.run("CREATE TABLE IF NOT EXISTS steg (qrkode TEXT PRIMARY KEY, bilde_base64 TEXT);");h(n)})()}),[]),(0,n.useEffect)((()=>{let e,t=null;return(async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t=n,r.current&&(r.current.srcObject=n,r.current.setAttribute("playsinline",!0),r.current.play());const i=()=>{if(r.current&&s.current){const e=s.current.getContext("2d");e.drawImage(r.current,0,0,s.current.width,s.current.height);const t=e.getImageData(0,0,s.current.width,s.current.height),n=a()(t.data,t.width,t.height);n&&n.data&&c(n.data)}e=requestAnimationFrame(i)};i()}})(),()=>{if(e&&cancelAnimationFrame(e),r.current&&r.current.srcObject){r.current.srcObject.getTracks().forEach((e=>e.stop())),r.current.srcObject=null}t&&t.getTracks().forEach((e=>e.stop()))}}),[]),(0,n.useEffect)((()=>{if(l&&o)try{const e=l.prepare("SELECT bilde_base64 FROM steg WHERE qrkode = ?");if(e.bind([o]),e.step()){const t=e.getAsObject();d(t.bilde_base64)}else d(null);e.free()}catch(e){d(null)}}),[l,o]),(0,i.jsxs)("div",{style:{maxWidth:500,margin:"0px auto",padding:0,background:"var(--ifm-background-color)",color:"var(--ifm-font-color-base)",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.08)"},children:[(0,i.jsx)("h2",{style:{textAlign:"center"},children:"Treasure Hunt"}),(0,i.jsx)("video",{ref:r,style:{width:320,height:240}}),(0,i.jsx)("canvas",{ref:s,width:320,height:240,style:{display:"none"}}),t&&(0,i.jsxs)("div",{children:["Scanned code: ",o]}),u?(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Location"}),(0,i.jsx)("img",{src:u,alt:`Bilde for kode ${o}`,style:{maxWidth:"100%"}})]}):o?(0,i.jsxs)("div",{children:["Could not find image for code ",o,"."]}):null]})}},8453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>o});var n=r(6540);const s={},a=n.createContext(s);function i(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);