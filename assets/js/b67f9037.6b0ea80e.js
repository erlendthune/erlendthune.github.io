"use strict";(self.webpackChunkerlendthune_com=self.webpackChunkerlendthune_com||[]).push([[4573],{8435:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>g,frontMatter:()=>d,metadata:()=>n,toc:()=>m});const n=JSON.parse('{"id":"treasurehunter/create-treasure-hunt","title":"Create Treasure Hunt","description":"","source":"@site/docs/treasurehunter/create-treasure-hunt.mdx","sourceDirName":"treasurehunter","slug":"/treasurehunter/create-treasure-hunt","permalink":"/docs/treasurehunter/create-treasure-hunt","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Create Treasure Hunt","hide_title":true},"sidebar":"productsSidebar","previous":{"title":"Instructions","permalink":"/docs/treasurehunter/instructions"},"next":{"title":"Treasure Hunt","permalink":"/docs/treasurehunter/treasure-hunt"}}');var a=r(4848),s=r(8453),o=r(6540);function i(e){return new Promise(((t,r)=>{if(window.initSqlJs)return void t();const n=document.createElement("script");n.src=e,n.async=!0,n.onload=t,n.onerror=r,document.body.appendChild(n)}))}const l=()=>{const[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)("Vent, laster inn..."),[s,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(null),[u,m]=(0,o.useState)([]),h=e=>{const t=e.export(),r=btoa(String.fromCharCode(...new Uint8Array(t)));localStorage.setItem("sqlite-db",r),console.log("Database saved to localStorage")},g=e=>{const t=e.exec("SELECT * FROM steg"),r=t[0]?t[0].values:[];m(r)};(0,o.useEffect)((()=>{(async()=>{const e={locateFile:()=>"/garmin/sql-wasm.wasm"};try{await i("/garmin/sql-wasm.js");const r=await window.initSqlJs(e);let a;console.log("sql.js initialized \ud83c\udf89");const s=localStorage.getItem("sqlite-db");if(s){const e=new Uint8Array(atob(s).split("").map((e=>e.charCodeAt(0))));a=new r.Database(e),console.log("Database loaded from localStorage")}else a=new r.Database,a.run("\n          CREATE TABLE IF NOT EXISTS steg (\n            qrkode TEXT PRIMARY KEY,\n            bilde_base64 TEXT\n          );\n        ");t(a),n("Start adding QR codes and images!"),g(a)}catch(r){console.error("Error initializing sql.js:",r),n("Could not load the database.")}})()}),[]);return(0,a.jsxs)("div",{style:{maxWidth:500,margin:"40px auto",padding:24,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.08)"},children:[(0,a.jsx)("h1",{style:{textAlign:"center"},children:"Add QR number and image"}),(0,a.jsx)("p",{children:r}),(0,a.jsx)("div",{style:{marginBottom:16},children:(0,a.jsxs)("label",{style:{display:"block",fontWeight:500,marginBottom:6},children:["QR-code number:",(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"1, 2, 3...",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"1rem",marginTop:4,marginBottom:8,boxSizing:"border-box",outline:"none",transition:"border 0.2s"}})]})}),(0,a.jsx)("div",{style:{marginBottom:16},children:(0,a.jsxs)("label",{style:{display:"block",fontWeight:500,marginBottom:6},children:["Upload image:",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{c(e.result)},e.readAsDataURL(t)}},style:{display:"block",marginTop:4,fontSize:"1rem"}})]})}),d&&(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsx)("h3",{style:{marginBottom:8},children:"Preview of picture:"}),(0,a.jsx)("img",{src:d,alt:"Preview",width:"100",style:{borderRadius:8,boxShadow:"0 1px 6px rgba(0,0,0,0.08)"}})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)("button",{onClick:()=>{s&&d&&e?(e.run("INSERT INTO steg (qrkode, bilde_base64) VALUES (?, ?)",[s,d]),h(e),g(e),n(`QR-kode ${s} og bilde lagret!`),l(""),c(null)):n("Fyll ut alle feltene!")},style:{padding:"10px 20px",borderRadius:6,border:"none",background:"#1976d2",color:"#fff",fontWeight:600,fontSize:"1rem",cursor:"pointer",marginRight:12,boxShadow:"0 1px 4px rgba(25, 118, 210, 0.08)",transition:"background 0.2s"},children:"Save QR-code and image"}),(0,a.jsx)("button",{onClick:async()=>{localStorage.removeItem("sqlite-db"),n("Databasen er t\xf8mt.");await i("/garmin/sql-wasm.js");const e=new((await window.initSqlJs({locateFile:()=>"/garmin/sql-wasm.wasm"})).Database);e.run("CREATE TABLE IF NOT EXISTS steg (qrkode TEXT PRIMARY KEY, bilde_base64 TEXT);"),t(e),m([]),l(""),c(null)},style:{padding:"10px 20px",borderRadius:6,border:"none",background:"#e74c3c",color:"#fff",fontWeight:600,fontSize:"1rem",cursor:"pointer",boxShadow:"0 1px 4px rgba(231, 76, 60, 0.08)",transition:"background 0.2s"},children:"Clear database"})]}),(0,a.jsx)("h2",{children:"Image database:"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"QR-code"}),(0,a.jsx)("th",{children:"Image (Base64)"})]})}),(0,a.jsx)("tbody",{children:0===u.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"2",children:"The database is empty"})}):u.map(((e,t)=>{let[r,n]=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:r}),(0,a.jsx)("td",{children:(0,a.jsx)("img",{src:n,alt:`Bilde ${r}`,width:"50"})})]},t)}))})]})]})},d={sidebar_position:2,title:"Create Treasure Hunt",hide_title:!0},c=void 0,u={},m=[];function h(e){return(0,a.jsx)(l,{})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h()}},8453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>i});var n=r(6540);const a={},s=n.createContext(a);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);