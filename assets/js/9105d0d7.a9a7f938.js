"use strict";(self.webpackChunkerlendthune_com=self.webpackChunkerlendthune_com||[]).push([[7975],{1557:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6540),a=r(6624),s=r.n(a),c=r(4848);const i=e=>{let{showScannedCode:t=!1}=e;const r=(0,n.useRef)(null),a=(0,n.useRef)(null),[i,o]=(0,n.useState)(""),[d,l]=(0,n.useState)(null),[u,h]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{var e;await(e="/sql/sql-wasm.js",new Promise(((t,r)=>{if(window.initSqlJs)return void t();const n=document.createElement("script");n.src=e,n.async=!0,n.onload=t,n.onerror=r,document.body.appendChild(n)})));const t=await window.initSqlJs({locateFile:()=>"/sql/sql-wasm.wasm"}),r=localStorage.getItem("sqlite-db");let n;if(r){const e=new Uint8Array(atob(r).split("").map((e=>e.charCodeAt(0))));n=new t.Database(e)}else n=new t.Database,n.run("CREATE TABLE IF NOT EXISTS steg (qrkode TEXT PRIMARY KEY, bilde_base64 TEXT);");h(n)})()}),[]),(0,n.useEffect)((()=>{let e,t=null;return(async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t=n,r.current&&(r.current.srcObject=n,r.current.setAttribute("playsinline",!0),r.current.play());const c=()=>{if(r.current&&a.current){const e=a.current.getContext("2d");e.drawImage(r.current,0,0,a.current.width,a.current.height);const t=e.getImageData(0,0,a.current.width,a.current.height),n=s()(t.data,t.width,t.height);n&&n.data&&o(n.data)}e=requestAnimationFrame(c)};c()}})(),()=>{if(e&&cancelAnimationFrame(e),r.current&&r.current.srcObject){r.current.srcObject.getTracks().forEach((e=>e.stop())),r.current.srcObject=null}t&&t.getTracks().forEach((e=>e.stop()))}}),[]),(0,n.useEffect)((()=>{if(u&&i)try{const e=u.prepare("SELECT bilde_base64 FROM steg WHERE qrkode = ?");if(e.bind([i]),e.step()){const t=e.getAsObject();l(t.bilde_base64)}else l(null);e.free()}catch(e){l(null)}}),[u,i]),(0,c.jsxs)("div",{style:{maxWidth:500,margin:"0px auto",padding:0,background:"var(--ifm-background-color)",color:"var(--ifm-font-color-base)",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.08)"},children:[(0,c.jsx)("h2",{style:{textAlign:"center"},children:"Treasure Hunt"}),(0,c.jsx)("video",{ref:r,style:{width:320,height:240}}),(0,c.jsx)("canvas",{ref:a,width:320,height:240,style:{display:"none"}}),t&&(0,c.jsxs)("div",{children:["Scanned code: ",i]}),d?(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"Location"}),(0,c.jsx)("img",{src:d,alt:`Bilde for kode ${i}`,style:{maxWidth:"100%"}})]}):i?(0,c.jsxs)("div",{children:["Could not find image for code ",i,"."]}):null]})}},5639:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});r(6540);var n=r(1557),a=r(4848);function s(){return(0,a.jsx)(n.A,{})}}}]);